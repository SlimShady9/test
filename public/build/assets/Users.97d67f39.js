import{u as H,r as u,a as x,j as r,F as U,L as $}from"./app.a05bb740.js";import{C as M}from"./Container.c590b5fd.js";import{A as P}from"./Authenticated.698c9c2d.js";import{a as j}from"./index.0edb6af2.js";import{d as R}from"./index.esm.eb32d5aa.js";import{R as A}from"./index.esm.0379c04d.js";import{B as V}from"./ButtonGroup.1fd4f518.js";import{M as G}from"./Modal.de185a34.js";import{I as Q}from"./Input.d4906371.js";import{S as k}from"./SelectInput.a046b7ee.js";import{B as D}from"./Button.f580da67.js";import{L as z}from"./Label.ac7cf7d7.js";import{R as J}from"./react-loading.7ecf0a06.js";import{Q as K}from"./index.es.18a8fe1c.js";import{a as W}from"./TipoDocumentoEnum.5de49903.js";import{t as X}from"./TipoDeUsuariosEnum.2a2c2a7c.js";import"./iconBase.17a5e8ee.js";import"./transportes.87cfd211.js";import"./Card.13955413.js";import"./hoist-non-react-statics.cjs.13665392.js";function Y({parameters:c=[],onSubmit:l,titleForm:p,buttonText:h,cols:v,className:C}){const{data:o,setData:d,processing:b,errors:N,reset:w}=H(c.map(a=>({...a,value:a.value||""}))),[g,f]=u.exports.useState(!1),S=(a,i,n)=>{a.label?(d(e=>{const t=e.find(s=>s.name==n),m=e.findIndex(s=>s.name==n);return t.value={name:a.label,value:a.value},e[m]=t,e}),i({label:a.label,value:a.value})):(d(e=>{const t=e.find(s=>s.name==a.target.name),m=e.findIndex(s=>s.name==a.target.name);return t.value=a.target.value,e[m]=t,e}),i(a.target.value))};return x("form",{onSubmit:a=>{a.preventDefault(),f(!0);const i=Object.keys(o).map(e=>o[e].type=="select"?{[o[e].name]:o[e].value.value||o[e].value[0].value}:o[e].type=="text"?{[o[e].name]:o[e].value}:o[e]),n={};i.map(e=>{isNaN(Object.keys(e)[0])&&(n[Object.keys(e)[0]]=Object.values(e)[0])}),l(n)},children:[c.map(({label:a,extend:i,name:n,type:e,value:t,required:m,options:s,onlyLetters:E,alpaNumeric:O,onlyNumbers:I,email:T,min:y,max:B,minLenght:F,maxLenght:_})=>r(Z,{label:a,extend:i,name:n,type:e,value:t,required:m,options:s,handleChange:S,onlyLetters:E,alpaNumeric:O,onlyNumbers:I,email:T,min:y,max:B,minLenght:F,maxLenght:_},`${a}_${n}`)),x("div",{className:"flex col-span-2 justify-center m-4",children:[r("br",{}),x(D,{className:"justify-center ",processing:b,children:[g&&r(J,{type:"spin",color:"#808080",height:16,width:16}),!g&&h]})]})]})}function Z({label:c,extend:l,name:p,type:h,value:v,required:C,options:o,handleChange:d,onlyLetters:b,alpaNumeric:N,onlyNumbers:w,email:g,min:f,max:S,minLenght:L,maxLenght:a}){const[i,n]=u.exports.useState(v);return x("div",{className:"col-span-"+l,children:[r(z,{forInput:p,value:c}),h==="select"?r(k,{options:o,value:i,onChange:e=>d(e,n,p),required:C}):r(Q,{type:h,name:p,defaultValue:i,autoComplete:p,handleChange:e=>d(e,n,p),required:C,onlyLetters:b,alpaNumeric:N,onlyNumbers:w,email:g,min:f,max:S,minLength:L,maxLength:a})]})}const q=({lUser:c})=>{const[l,p]=u.exports.useState(""),[h,v]=u.exports.useState([]),[C,o]=u.exports.useState([]),[d,b]=u.exports.useState(null),[N,w]=u.exports.useState([]),[g,f]=u.exports.useState(""),S=()=>f(!1),L=e=>{j.put(`/api/user/${d}`,e).then(t=>{v(m=>m.map(s=>s.id===t.data.id?t.data:s)),o(m=>m.map(s=>s.id===t.data.id?t.data:s)),b(null),f(!1)})},a=async()=>{try{const e=await j.get("/api/user");v(e.data.data.filter(t=>c.id!==t.id)),o(e.data.data.filter(t=>c.id!==t.id))}catch(e){console.log(e)}},i=[{name:"Nombre de usuario",selector:e=>e.username},{name:"Nombres",selector:e=>e.name+" "+e.surname,sortable:!0},{name:"Tipo de usuario",selector:e=>X(e.id_t_user)},{name:"Correo",selector:e=>r("a",{href:"http://"+e.email,target:"_blank",className:"bg-blue",children:e.email})},{name:"Documento",selector:e=>W(e.id_t_user)+" "+e.doc},{name:"Celular",selector:e=>e.cellphone},{name:"Tel\xE9fono",selector:e=>e.phone},{name:"Opciones",grow:1.5,center:!0,cell:e=>r(V,{listButtons:[{onClick:()=>n(e.id),icon:r(R,{}),text:"Editar",className:"bg-blue-400"},{onClick:()=>console.log("Eliminar"),icon:r(A,{}),text:"Eliminar"}]})}];u.exports.useEffect(()=>{a()},[]);const n=e=>{j.get(`/api/user/${e}/edit`).then(t=>{w(t.data.parameters),f(!0),b(e)})};return u.exports.useEffect(()=>{const e=h.filter(t=>t.username.toLowerCase().match(l.toLowerCase())||t.surname.toLowerCase().match(l.toLowerCase())||t.phone.match(l)||t.cellphone.match(l)||t.doc.match(l)||t.email.toLowerCase().match(l.toLowerCase()));o(e)},[l]),r(K,{columns:i,data:C,highlightOnHover:!0,fixedHeader:!0,pagination:!0,subHeader:!0,noDataComponent:"No se encontraron resultados",paginationComponentOptions:{rowsPerPageText:"Filas por p\xE1gina",rangeSeparatorText:"de"},subHeaderComponent:x(U,{children:[r($,{href:"regUser",className:"p-3 bg-blue-400",children:r(D,{children:"Nuevo Usuario"})}),r("input",{type:"text",placeholder:"Buscar",className:"w-25 form-control rounded-3xl",value:l,onChange:e=>p(e.target.value)}),r(G,{onHide:S,show:g,title:"Editar usuario",children:r(Y,{parameters:N,buttonText:"Editar usuario",onSubmit:L})})]})})};var ee=q;function Se(c){return u.exports.useState([]),r(U,{children:r(P,{...c,children:x(M,{className:"justify-center bg-opacity-30 shadow-xl flex flex-col ",children:[r("h1",{className:"text-blue-primary text-3xl mb-1 font-bold  text-center hover:scale-110 ease-in duration-200",children:"Tabla de Usuarios"}),r(ee,{lUser:c.auth.user})]})})})}export{Se as default};
