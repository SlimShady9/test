import{r as s,a as i,F as d,j as e,H as E}from"./app.5036f3a7.js";import{L as u}from"./Label.7c7e1583.js";import{B as S}from"./Button.3cbd48f3.js";import{a as p}from"./index.9b570c6c.js";import{b as w}from"./TipoDeUsuariosEnum.c0dd3777.js";import{t as y}from"./EstadoServiciosEnum.4fd202f0.js";import{b as I}from"./FetchService.4c811df7.js";import{Q as l}from"./ReactToastify.942c415a.js";import{I as N}from"./Input.a001d7b3.js";import{R as F}from"./react-loading.5fab4f61.js";const q=async r=>{try{p.post("/api/email",r)}catch(t){return{data:null,error:t}}},D=async r=>{try{return{data:(await p.post("/api/emailMainPage",r)).data.success,error:null}}catch(t){return{data:null,error:t}}};function z({auth:r,serviceId:t,isMainPage:o=!1}){const[f,h]=s.exports.useState(null),[g,L]=s.exports.useState(o?"Escribe tu comentario":"Escribe tu comentario acerca del servicio"),[n,c]=s.exports.useState(!1),[m,v]=s.exports.useState(r?r.user.email:"");return s.exports.useEffect(()=>{o||I(t).then(a=>{h(a[0])})},[]),i(d,{children:[e(E,{title:"Datos del servicio"}),e("h1",{className:"text-xl font-bold text-left mb-3",children:g}),e("form",{className:"gap-4",onSubmit:a=>{a.preventDefault(),c(!0),o?D({comentario:a.target.descripcion.value,contacto:m}).then(({data:x,error:b})=>{if(c(!1),b){l.warning("Error al enviar el correo, por favor intenta m\xE1s tarde");return}if(l.success(x),r){window.location.href="/dashboard";return}window.location.href="/"}):q({servicio:t,comentario:a.target.descripcion.value,usuario:r.user.email,tUsuario:w(r.user.id_t_user),stateService:y(f.id_state_service)}).then(()=>{c(!1),l.success("Correo enviado")})},children:i("div",{className:"flex flex-col w-full gap-4",children:[o&&i(d,{children:[e("div",{children:e(u,{children:"Ingresa un medio de contacto"})}),e(N,{name:"contact",defaultValue:m,required:!0,handleChange:a=>{v(a.target.value)},disabled:!!r})]}),e("div",{className:"mt-3",children:e(u,{children:"Descripci\xF3n / Recomendaciones"})}),e("textarea",{className:"m-1 rounded-md font-sans tracking-widest",name:"descripcion",id:"",cols:"30",rows:"4",required:!0}),e("div",{className:"my-3 m-auto",children:i(S,{type:"submit",processing:n,children:[n&&e(F,{type:"spin",height:40,width:40,color:"#808080"}),!n&&"Enviar comentario"]})})]})})]})}export{z as P};
