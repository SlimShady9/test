import{r as o,j as t,a as n,F as f,L as b}from"./app.63c72a0b.js";import{A}from"./Authenticated.5cfa87ed.js";import{C as d}from"./Container.f909ca93.js";import{a as m}from"./index.d8622dc5.js";import{h as F,e as O}from"./index.esm.f53e7565.js";import{B as N}from"./Button.f7308e50.js";import{Q as G}from"./index.es.a5d83e5d.js";import{G as L}from"./iconBase.ee84b57b.js";import{B as $}from"./ButtonGroup.6e41d078.js";import{a as H}from"./EstadoServiciosEnum.74aa18f7.js";import{t as I}from"./TipoDeServiciosEnum.333dc939.js";import"./TipoDeUsuariosEnum.fd1e81a1.js";import"./transportes.87cfd211.js";import"./hoist-non-react-statics.cjs.13665392.js";const P=async s=>{try{const a=await m.post("/api/tiempoLog",s);return a.status===200||a.status===201||a.status===202?{data:a.data,error:null}:{data:null,error:"Error al guardar el contenido"}}catch(a){return{data:null,error:a}}};function M(s){return L({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"40",d:"M160 164s1.44-33 33.54-59.46C212.6 88.83 235.49 84.28 256 84c18.73-.23 35.47 2.94 45.48 7.82C318.59 100.2 352 120.6 352 164c0 45.67-29.18 66.37-62.35 89.18S248 298.36 248 324"}},{tag:"circle",attr:{cx:"248",cy:"399.99",r:"32"}}]})(s)}const V=s=>{const[a,c]=o.exports.useState(""),[p,v]=o.exports.useState([]),[l,h]=o.exports.useState([]),[g,E]=o.exports.useState([]),y=()=>{console.log("guardar tiempo"),E({start_date:new Date}),console.log(g),P(g)};function C(e){let r;console.log(l);const i=",",u=`
`,x=Object.keys(l[0]);return r="",r+=x.join(i),r+=u,e.forEach(D=>{let S=0;x.forEach(j=>{S>0&&(r+=i),r+=D[j],S++}),r+=u}),r}function w(e){const r=document.createElement("a");let i=C(e);if(i==null)return;const u="export.csv";i.match(/^data:text\/csv/i)||(i=`data:text/csv;charset=utf-8,${i}`),r.setAttribute("href",encodeURI(i)),r.setAttribute("download",u),r.click()}const _=async()=>{try{const e=s.auth.user.id;if(s.auth.user.id_t_user==1){const r=await m.get("/api/service");v(r.data),h(r.data)}else{const r=await m.get(`/api/service/${e}/serviceByUser`);v(r.data),h(r.data)}}catch(e){console.log(e)}},k=({onExport:e})=>t(N,{onClick:r=>e(r.target.value),children:"Export"}),T=[{name:"No. de Gu\xEDa / Opciones",grow:2.7,center:!0,cell:e=>t(f,{children:n("div",{className:"grid gap-2 m-1",children:[t("div",{className:"text-center text-lg font-bold",children:e.tracking_id}),t("div",{className:"mx-auto",children:t($,{listButtons:[{href:`deliveryProof/${e.id}`,icon:t(F,{}),text:"Ver"},{href:`editService/${e.id}`,icon:t(O,{}),text:"Editar"},{href:`pqrs/${e.id}`,icon:t(M,{}),text:"Ayuda"}]})})]})})},{name:"Nombre",grow:1.7,sortable:!0,selector:e=>e.name},{name:"Tipo",sortable:!0,selector:e=>I(e.id_type_service)},{name:"Estado",sortable:!0,selector:e=>H(e.id_state_service)},{name:"Firmado",sortable:!0,selector:e=>e.signature!=null?"SI":"NO"},{name:"Inicio",sortable:!0,selector:e=>e.start_date},{name:"Fin",sortable:!0,selector:e=>e.end_date!=null?e.end_date:"No ha Finalizado"}];o.exports.useEffect(()=>{_()},[]),o.exports.useEffect(()=>{const e=p.filter(r=>r.name.toLowerCase().match(a.toLowerCase())||r.tracking_id.match(a));h(e)},[a]);const B=o.exports.useMemo(()=>t(k,{onExport:()=>w(l)}),[]);return n(f,{children:[n("div",{className:"grid grid-cols-1 gap-4 w-full",children:[t("div",{className:"m-auto",children:t(b,{href:"createService",className:"bg-blue-400",children:t(N,{className:" text-3xl",children:"Nuevo Servicio"})})}),t("div",{className:"m-auto sm:ml-5",children:t("input",{type:"text",placeholder:"Buscar",className:"w-25 form-control rounded-3xl",value:a,onChange:e=>c(e.target.value)})})]}),t(G,{columns:T,data:l,actions:B,highlightOnHover:!0,fixedHeader:!0,pagination:!0,subHeader:!0,noDataComponent:"No se encontraron resultados",paginationComponentOptions:{rowsPerPageText:"Filas por p\xE1gina",rangeSeparatorText:"de"},subHeaderComponent:n(d,{className:"flex",children:[t(b,{href:"createService",className:"p-3 bg-blue-400",onClick:y,children:t(d,{className:"hover:scale-125 shadow-xl rounded-3xl bg-green-light",children:"Nuevo Servicio"})}),t(d,{children:t("input",{type:"text",placeholder:"Buscar",className:"w-25 form-control rounded-3xl",value:a,onChange:e=>c(e.target.value)})})]})})]})};var q=V;function oe(s){const[a,c]=o.exports.useState([]);return o.exports.useState(""),o.exports.useState(null),o.exports.useEffect(()=>{m.get("/api/service/create").then(p=>{c(p.data.parameters)})},[]),t(f,{children:t(A,{...s,children:n(d,{className:"sm:m-6 justify-center bg-opacity-30 shadow-xl",children:[t("h1",{className:"text-blue-primary text-3xl mb-1 font-bold  text-center hover:scale-110 ease-in duration-200",children:"Tabla de Servicios"}),t(q,{auth:s.auth})]})})})}export{oe as default};
