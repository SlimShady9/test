import{r,j as t,a as m,L as g,F as v}from"./app.931c200f.js";import{A as x}from"./Authenticated.18146c17.js";import{C as i}from"./Container.4e2431ad.js";import{a as u}from"./index.9b570c6c.js";import{g as S,d as b}from"./index.esm.cc6f83de.js";import{Q as y}from"./index.es.a7932b73.js";import{G as N}from"./iconBase.84604709.js";import{B as _}from"./ButtonGroup.1a831fcb.js";import{t as C}from"./EstadoServiciosEnum.1def3d76.js";import{t as E}from"./TipoDeServiciosEnum.f8824a38.js";import"./TipoDeUsuariosEnum.c0dd3777.js";import"./transportes.87cfd211.js";import"./hoist-non-react-statics.cjs.13665392.js";function T(s){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"40",d:"M160 164s1.44-33 33.54-59.46C212.6 88.83 235.49 84.28 256 84c18.73-.23 35.47 2.94 45.48 7.82C318.59 100.2 352 120.6 352 164c0 45.67-29.18 66.37-62.35 89.18S248 298.36 248 324"}},{tag:"circle",attr:{cx:"248",cy:"399.99",r:"32"}}]})(s)}const k=s=>{const[o,n]=r.exports.useState(""),[c,d]=r.exports.useState([]),[p,l]=r.exports.useState([]),h=async()=>{try{const e=s.auth.user.id;if(s.auth.user.id_t_user==1){const a=await u.get("/api/service");d(a.data),l(a.data)}else{const a=await u.get(`/api/service/${e}/serviceByUser`);d(a.data),l(a.data)}}catch(e){console.log(e)}},f=[{name:"Tracking ID",sortable:!0,selector:e=>e.tracking_id},{name:"Nombre",sortable:!0,selector:e=>e.name},{name:"Tipo",sortable:!0,selector:e=>E(e.id_type_service)},{name:"Estado",sortable:!0,selector:e=>C(e.id_state_service)},{name:"Firmado",sortable:!0,selector:e=>e.signature!=null?"SI":"NO"},{name:"Inicio",sortable:!0,selector:e=>e.start_date},{name:"Fin",sortable:!0,selector:e=>e.end_date!=null?e.end_date:"No ha Finalizado"},{name:"Opciones",grow:2.5,center:!0,cell:e=>t(_,{listButtons:[{href:`deliveryProof/${e.id}`,icon:t(S,{}),text:"Ver"},{href:`editService/${e.id}`,icon:t(b,{}),text:"Editar"},{href:`pqrs/${e.id}`,icon:t(T,{}),text:"Ayuda"}]})}];return r.exports.useEffect(()=>{h()},[]),r.exports.useEffect(()=>{const e=c.filter(a=>a.name.toLowerCase().match(o.toLowerCase())||a.tracking_id.match(o));l(e)},[o]),t(y,{columns:f,data:p,highlightOnHover:!0,fixedHeader:!0,pagination:!0,subHeader:!0,noDataComponent:"No se encontraron resultados",paginationComponentOptions:{rowsPerPageText:"Filas por p\xE1gina",rangeSeparatorText:"de"},subHeaderComponent:m(i,{className:"flex",children:[t(g,{href:"createService",className:"p-3 bg-blue-400",children:t(i,{className:"hover:scale-125 shadow-xl rounded-3xl bg-green-light",children:"Nuevo Servicio"})}),t(i,{children:t("input",{type:"text",placeholder:"Buscar",className:"w-25 form-control rounded-3xl",value:o,onChange:e=>n(e.target.value)})})]})})};var w=k;function Q(s){const[o,n]=r.exports.useState([]);return r.exports.useState(""),r.exports.useState(null),r.exports.useEffect(()=>{u.get("/api/service/create").then(c=>{n(c.data.parameters)})},[]),t(v,{children:t(x,{...s,children:m(i,{className:"m-6 justify-center bg-opacity-30 shadow-xl",children:[t(i,{className:"justify-center",children:t("h1",{className:"text-blue-primary text-3xl mb-1 font-bold  text-center hover:scale-110 ease-in duration-200",children:"Tabla de Servicios"})}),t(w,{auth:s.auth})]})})})}export{Q as default};
