import{r as d,j as s,F as A,a as _}from"./app.3df41286.js";import{g as f,S as T,a as h,b as x,M,A as V,U as k,C as y,T as U}from"./ContentForm.c802e175.js";import{C as L}from"./Card.acda3bf9.js";import{C as F}from"./Container.92fc8967.js";import{E as t}from"./EstadoServiciosEnum.4fd202f0.js";import{T as o}from"./TipoDeServiciosEnum.f8824a38.js";import{A as b}from"./Authenticated.61f40291.js";import{o as w,q as G}from"./FetchContent.32e5fbc2.js";import{b as J,e as j,g as P,u as q}from"./FetchService.4c811df7.js";import{R as B}from"./react-loading.6972d94d.js";import{L as z}from"./Label.9d6020c0.js";import{T as H}from"./TipoDeUsuariosEnum.c0dd3777.js";import"./Input.6e4395a8.js";import"./Button.8d672579.js";import"./SelectInput.a56c7852.js";import"./hoist-non-react-statics.cjs.13665392.js";import"./ReactToastify.34e4e8c5.js";import"./FetchUsers.04bf1ad3.js";import"./index.9b570c6c.js";import"./Modal.40f52a9d.js";import"./TipoDeCargaEnum.513c970d.js";import"./iconBase.05d30436.js";import"./transportes.ca9f9614.js";function le(i){const{auth:K,serviceId:c}=i,C=[t.SERVICIO_INCIADO,t.SERVICIO_DIRECCION_CONFIRMADA,t.SERVICIO_MENSAJERIA,t.SERVICIO_USUARIOS_ASIGNADOS,t.SERVICIO_CON_CONTENIDO,t.SERVICIO_CON_TAREAS],[v,p]=d.exports.useState(C),[r,a]=d.exports.useState(t.SERVICIO_INCIADO),[O,N]=d.exports.useState(!1),[e,I]=d.exports.useState({service:{},address:{},messaging:{},content:[],orders:[],tasks:[]});d.exports.useEffect(()=>{l()},[]);const l=async()=>{var n={};const[S,m]=await J(c);I(D=>({...D,service:S}));const[E,Q]=await j(S.address);if(e.service.id_type_service!==o.LOGISTICA_DE_MENSJERIA&&e.service.id_type_service!==o.GESTION_DOCUMENTAL)var[n,W]=await f(c),[u,X]=await w(c);const[g,Y]=await P(c),[R,Z]=await G(c);I({service:S,address:E,messaging:n,content:u||{},orders:g,tasks:R}),N(!0)};return s(A,{children:_(b,{...i,children:[!O&&s(B,{type:"spin",color:"#D3D3D3",height:"10%",width:"10%",className:"m-auto translate-y-2/3"}),O&&s(F,{className:"flex justify-center",children:_(L,{className:"",children:[s("h1",{className:"text-2xl font-bold text-center",children:"Crear Servicio"}),s(T,{currentStep:r,steps:v}),s(A,{}),_(h.Provider,{value:{serviceDTO:e,setServiceDTO:I},children:[r===t.SERVICIO_INCIADO&&s(x,{currentStep:r,setNextStep:a,setServicesAvailable:p,service:e.service,isEdit:!0,typeUser:i.auth.user.id_t_user}),r===t.SERVICIO_MENSAJERIA&&s(M,{currentStep:r,setNextStep:a,user:i.auth.user,messaging:e.messaging,isEdit:!!e.messaging.id}),r===t.SERVICIO_DIRECCION_CONFIRMADA&&s(V,{title:"Direcci\xF3n de origen",api_token:i.api_token,address:e.address,onSubmit:(n,S)=>{const m={...e.service,address:n.id};if(q(m),I(function(E){return{...E,service:m,address:n}}),S&&window.history.back(),i.auth.user.id_t_user===H.ADMIN&&(e.service.id_type_service===o.LOGISTICA_DE_MENSJERIA||e.service.id_type_service===o.GESTION_DOCUMENTAL)){a(t.SERVICIO_USUARIOS_ASIGNADOS);return}e.service.id_type_service===o.LOGISTICA_DE_MENSJERIA||e.service.id_type_service===o.GESTION_DOCUMENTAL?a(t.SERVICIO_CON_TAREAS):a(t.SERVICIO_MENSAJERIA)},isEdit:!!e.address.id}),r===t.SERVICIO_USUARIOS_ASIGNADOS&&s(k,{currentStep:r,setNextStep:a,users:e.orders}),r===t.SERVICIO_CON_CONTENIDO&&s(y,{currentStep:r,setNextStep:a,content:e.content,isEdit:!!e.content.id}),r===t.SERVICIO_CON_TAREAS&&s(U,{api_token:i.api_token,currentStep:r,setNextStep:a,pTasks:e.tasks,isEdit:!0,user:i.auth.user}),s(z,{className:"text-right",children:"Llene los espacios obligatorios con marca *"})]})]})})]})})}export{le as default};
